## Web Design Assignment

[Link to my website!](https://sandbox-sociala.web.app/)

- DM
- Table of Figures Table of Contents
- Planning & Research
   - Target Audience
   - Design
- Wireframes & Prototypes
- Self Evaluation
   - Lessons learned
   - Improvements
   - Victories
   - Failures
   - Future goals
- Design - Visual Aesthetics
   - Main Theme
   - Construction Green Theme
   - Dark Mode
- Development
- Chapter 1:
- Software Architecture Design
   - Front-end of Sandbox Social Platform
      - 1.1.1 Home Page
      - 1.1.2 User Page
      - 1.1.3 Sign In/Sign Up Page
   - Backend of Sandbox Social Platform
      - 1.2.1 Cloud Functions
   - Database of Sandbox Social Platform
      - 1.3.1 User Schema
      - 1.3.2 Post Schema
      - 1.3.3 Comment Schema
      - 1.3.4 Notification Schema
      - 1.3.5 Like Schema
- Chapter 2:
- Implementation
   - 2.1 Front end
      - 2.1.1 One message feed/post
      - 2.1.2 Comment thread
      - 2.1.3 Profile
      - 2.1.4 Post form modal
      - 2.1.5 NavBar
      - 2.1.6 Like button
      - 2.1.7 Notification
      - 2.1.8 Comments
      - 2.1.9 Home page layout
      - 2.1.10 Login page
      - 2.1.11 Theme
   - 2.2 Back end
      - 2.2.1 Authentication
      - 2.2.2 Profile
      - 2.2.3 Message Feed
      - 2.2.4 Post
      - 2.2.5 Comment
      - 2.2.6 Notification
      - 2.2.7 Like
- Reference
- Figure 1: Dependencies for front-end Table of Figures
- Figure 2: Dependencies for backend
- Figure 3: Regex code
- Figure 4: Error creation code
- Figure 5: Validation code
- Figure 6: Import Firebase admin and initialize app
- Figure 7: Import Firebase and relevant modules to initialize app
- Figure 8: User Sign up code
- Figure 9: Sign up API
- Figure 10: User Sign in code
- Figure 11: Sign in API
- Figure 12: Get user profile
- Figure 13: Convert to JSON
- Figure 14: Trim data
- Figure 15: Update user details
- Figure 16: Import database module
- Figure 17: Pull data from Post collection and convert into JSON
- Figure 18: Validate post data
- Figure 19: Send post to database
- Figure 20: Validate Comment data
- Figure 21: Add comment to database
- Figure 22: Create Notification in database on like
- Figure 23: Create notificaiton for database on comment
- Figure 24: Create Like in database
- Figure 25: Delete Like in database


## Planning & Research

The main aim of this website is for people of the construction industry to connect with their
peers and communicate freely on this platform. They can share your ideas, their thoughts or
whatever they want on this social media platform. Included in this website is the comment and like
functions as well. They can comment and like other user’s post and this would generate interaction
and communication.

This website is inspired by Twitter, hence, many of the design elements and functions are similar
to the Twitter platform.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_1.png?alt=media&token=92cde990-f901-4b23-baa4-560ee8d35f28" width="500">

```
Figure 1 :Twitter UI
```

### Target Audience

The main target audience for this platform is for the people that are in the construction industry
although others are also free to join. The construction industry has been heavily battered by
COVID-19 and one of the main reasons is due to them not innovating in enough. This platform
hopes to connect all of them together and generate new ideas which could bring the construction
industry forward.

### Design

I will be using Material Design for the design of this platform. Material is a design system created
by Google to help teams build high-quality digital experiences for Android, iOS, Flutter, and the
web.

With the help of Figma’s material design kit, I can quickly spin up my designs and prototype in a
material design theme.

## Wireframes & Prototypes

I will be using Figma for the prototyping of this platform.

Here is the link to my prototyping which is in the starting phase.

Design Link: https://www.figma.com/file/WDP6EFLQXvaIP32LbKFZ72/DM8001-Web-
Design?node-id=0%3A

<iframe style="border: 1px solid rgba(0, 0, 0, 0.1);" width="800" height="450" src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Ffile%2FWDP6EFLQXvaIP32LbKFZ72%2FDM8001-Web-Design%3Fnode-id%3D0%253A1" allowfullscreen></iframe>

Prototype Link: https://www.figma.com/proto/WDP6EFLQXvaIP32LbKFZ72/DM8001-Web-
Design?node-id=205%3A1581&scaling=min-zoom&page-id=0%3A

<iframe style="border: 1px solid rgba(0, 0, 0, 0.1);" width="800" height="450" src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Fproto%2FWDP6EFLQXvaIP32LbKFZ72%2FDM8001-Web-Design%3Fnode-id%3D205%253A1581%26scaling%3Dmin-zoom%26page-id%3D0%253A1" allowfullscreen></iframe>

## Self Evaluation

### Lessons learned

I have gained an in-depth knowledge of using Cascading Style Sheets (CSS) as well as using
JavaScript to improve the user interface of the website.


Throughout the web design lessons as well as the project, I have learned valuable web
programming skills. Before this course started, I was familiar with simple web programming and
was stronger with handling the backend of a website. This was because my course, Information
engineering, and Media (IEM), was more of an engineering school rather than a design school.
Hence, I was familiar with handling databases and creating application programming interfaces
(APIs).

However, my front-end was weak as I was not trained in design. I knew about CSS but did not
know how to create a beautiful design out it. The lessons from this course and online articles taught
me the art of design in web development. With this, my front-end designing skills have improved
tremendously.

The lessons provided by professor Sven were pleasant as it was more hands on rather than just
watching coding lectures. Learning while coding is one of the most effective ways to learn.

### Improvements

There are many areas that I can improve on in terms of web programming. Firstly, would be my
CSS skills, I still have not fully grasped the full potential of CSS as I still mainly use CSS libraries
that provide components that you can customize. There is also much more CSS stuff that is yet to
be learned, such as animations which can be used in conjunction with JavaScript.

Secondly, would be my eye for design. I hope that I can improve on my design skills which are
subpar compared to the other art students in class. Even though there are Design Systems and
libraries that I can utilize to create good designs; I still want to reach a point where I can create my
design and style.

### Victories

Learning proper design and CSS would be considered a victory for me. Design is hard to learn and
it is harder to teach, hence, I would consider it a victory.

Creating a full-stack website from scratch would also be considered a victory for me. Both the
front-end and back-end of the website was tough to make. However, I managed to complete it in
the end and learned a lot through the process. I would consider this a victory.


### Failures

There are no failures from me. But if I had to point out one point where I wished that I could have
done better, it would have been on the design of the website as well as adding more functionality
to it. The design of the website could have been better especially the part on the media queries and
size adjustments. I also wished that I could have added more animations to the website as well.

### Future goals

In the future, I hope that my website design skills as well as my programming skills will improve.
Taking online courses and watching YouTube videos have really helped me in this process. Once,
I am finished with web programming, I may transition to mobile development. It seems like mobile
apps are now becoming increasingly popular, and I hope that the school would one day create a
module or a lesson on that.

## Design - Visual Aesthetics

### Main Theme

<iframe style="border: 1px solid rgba(0, 0, 0, 0.1);" width="800" height="450" src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Ffile%2FWDP6EFLQXvaIP32LbKFZ72%2FDM8001-Web-Design%3Fnode-id%3D0%253A1" allowfullscreen></iframe>
Prototype 1: https://www.figma.com/file/WDP6EFLQXvaIP32LbKFZ72/DM8001-Web-
Design?node-id=0%3A

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_2.png?alt=media&token=90d8a9d7-abb7-45c2-94c2-9f240506db67" width="500">

```
Figure 2 : Main theme
```
### Construction Green Theme

<iframe style="border: 1px solid rgba(0, 0, 0, 0.1);" width="800" height="450" src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Ffile%2FWDP6EFLQXvaIP32LbKFZ72%2FDM8001-Web-Design%3Fnode-id%3D215%253A0" allowfullscreen></iframe>

Prototype 2: https://www.figma.com/file/WDP6EFLQXvaIP32LbKFZ72/DM8001-Web-
Design?node-id=215%3A

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_3.png?alt=media&token=90d8a9d7-abb7-45c2-94c2-9f240506db67" width="500">

```
Figure 3 : Construction Green Theme
```
### Dark Mode

<iframe style="border: 1px solid rgba(0, 0, 0, 0.1);" width="800" height="450" src="https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Ffile%2FWDP6EFLQXvaIP32LbKFZ72%2FDM8001-Web-Design%3Fnode-id%3D220%253A3687" allowfullscreen></iframe>
Prototype 3: https://www.figma.com/file/WDP6EFLQXvaIP32LbKFZ72/DM8001-Web-
Design?node-id=220%3A

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_4.png?alt=media&token=90d8a9d7-abb7-45c2-94c2-9f240506db67" width="500">
```
Figure 4 : Dark Mode
```

## Development

## Chapter 1:

## Software Architecture Design

This web application will be used by many users; hence, it must be scalable and able to handle a
large amount of data. According to present-day website development architecture, the three main
components of a website are the front-end, back-end, and database. The figure below illustrates
the software architecture of this social media platform.

```
Figure 5 :Sandbox Architectural Design
```

```
Figure 6 :Sandbox Sitemap Design
```
### Front-end of Sandbox Social Platform

The front-end of the social platform, is created using React.js. Since React.js is a JavaScript library,
we will be using Facebook’s Create React App (CRA) as the framework to build this platform up.
The design of the main platform is done using Material UI, which is a React UI framework. These
are the key pages for the social platform:

- Home

```
o Post
o Comment
o Profile
o Notifications
```
- User

#### • Sign In/ Sign Up

#### 1.1.1 Home Page

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.05.22%20PM.png?alt=media&token=c36a57d4-8b76-42a8-b6ee-e835647733c6" width="500">
<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.06.58%20PM.png?alt=media&token=65c8117e-dc2c-446b-8f29-058926455859" width="500">
```
Figure 7 : Home page not logged in and logged in
```

The figure above shows the home page. It lists all the post made by registered users on the
platform. Registered users will have their profile status placed on the right column of the page.
Registered users will be able to like and comment and other user’s post.

1.1.1. 1 Post Component

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.08.38%20PM.png?alt=media&token=a2de6764-e768-4bc4-971a-81296fd7bbae" width="500">
```
Figure 8 : A post made by test2 with 1 likes and 4 comments
```
The figure above shows a post. It contains the profile picture, name, and message of the sender. It
will also show the time difference between the current time and the time of the creation for the
post. It will contain a like button and a comment button. The number beside the like button would
show the number of likes received and the same goes for the comments.

There will be a delete button at the top right of your post. This gives you an option to delete your
post in case of an error or mistake.


<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.15.12%20PM.png?alt=media&token=53047e1c-e0a5-48a0-b7bc-d49b8551f1b1" width="200">
```
Figure 9 : + icon in the navigation bar
```
To post a message, click the + icon on the navigation bar at the top of the screen.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.15.25%20PM.png?alt=media&token=9e483aa1-03f3-458f-83ad-17b970e7b034" width="500">
```
Figure 10 : Post modal
```
A modal will appear when you click the + icon. This allows you to post your message onto the
platform.

1. 1 .1.2 Comment Component

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.10.00%20PM.png?alt=media&token=97cd8703-d1d3-40c2-b40a-5ce7d01eed78" width="500">
```
Figure 11 : Full thread for post made by test
```
Comments will be shown when you click on the expand button on the bottom right button. It will
show all the comments related to this post. A user comment will contain the user’s profile picture,
name, message, and date of creation.


To post a comment, write your comment at the comment line notated by the grey font “Comment
on the post” and click the submit button.

1. 1 .1.3 Profile Component

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.10.32%20PM.png?alt=media&token=845ec06a-2da1-4211-b320-f7e5a40f16bc" width="250">
```
Figure 12 : Profile details of test
```
The figure above shows the bio of test 2. It contains the name, bio, location, website, and date of
creation for the account. At the top, it is an image of the user and it is editable as well by clicking
the pen icon on the right side of the profile picture.

The details of the user can also be changed by clicking the pen icon at the bottom right side of the
card component. To log out of your account, you can click the go back icon at the bottom left side
of the card component.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.16.37%20PM.png?alt=media&token=9960ff6d-bf3f-4f82-8213-a71f01ccd410" width="500">
```
Figure 13 : Editing form for details of test
```
The figure above shows the profile details editing modal. It will appear when the profile details
edit icon is clicked. Here, you can edit your bio, website, and location.
1.1.1.4 Notification Component

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%204.27.15%20PM.png?alt=media&token=08253efa-841e-44a1-b6e2-5af41571fb95" width="500">
```
Figure 14 : Notification bell icon
```
The figure above shows the navigation bar which contains the bell icon. The bell icon represents
the notification for the user. A red badge will appear if there are any notifications. Upon clicking
the icon, a popover will appear that lists the activities surrounding your account.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.16.52%20PM.png?alt=media&token=e25946ce-a930-4069-ae2c-1aec61cb0dc2" width="200">
```
Figure 15 : Notification menu
```
The figure above shows the list of notifications for the current user. It will show the activity such
as liking or commenting the user who liked or commented, and the time difference of the activity.

#### 1.1.2 User Page

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.16.09%20PM.png?alt=media&token=c08eca43-93c5-44d6-b217-500265c50433" width="500">
```
Figure 16 : User page for test
```
The figure above shows the user page for the test2. It lists all the posts that the user test2 has made.
The user can review the post that he has made and go through the message thread for some of
them. Having a centralized user’s page would be helpful to the user in situations where there are
many posts, and the message threads are long.

#### 1.1.3 Sign In/Sign Up Page

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.06.32%20PM.png?alt=media&token=0c28b920-6ce7-414e-a569-84ef4a513147" width="500">
<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/WebsiteScreenShots%2FScreenshot%202021-04-18%20at%203.06.32%20PM.png?alt=media&token=0c28b920-6ce7-414e-a569-84ef4a513147" width="500">
```
Figure 17 : Sign Up and Log In page for Social platform
```
The figure above shows the Sign-Up and login page for the Social platform. New users can register
on the platform by entering their email address, password, and name/handle. Registered users can
go to the login in page and enter their email and password, this will bring them to the home page
and they will be able to see the message feed and their profile at the same time.

### Backend of Sandbox Social Platform

#### 1.2.1 Cloud Functions

The social application of Sandbox is run Firebase Cloud functions. This allows me to run my
backend code on Firebase servers and automatically respond to any events that are triggered by
Firebase features or HTTPS requests. The code is written in JavaScript and is run on a Node.js
environment.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_18.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 18 : Overview of Firebase cloud functions for social application
```
From the image above, you can see that six cloud functions have been created to serve the social
application of Sandbox. The main API is named “API” and it is triggered by HTTPS requests that
are connected to https://asia-southeast2-sandbox-social.cloudfunctions.net/api. The other five
APIs are createNotificationOnComment, createNotificationOnLike, deleteNotificationOnUnLike,
onPostDelete and onUserImageChange. These five APIs are mainly to connect to the Cloud Firestore
database.

From here you can see the region that these APIs are connected to, all APIs are located at Asia-
southeast2 which is located at Jakarta, Indonesia, APAC.

The runtime used is Node.js 10, memory allocated is 256 MB and the timeout is set to 10 seconds.
All these settings have been placed because it is the most cost-efficient.

### Database of Sandbox Social Platform

#### 1.3.1 User Schema

When a user creates an account, only the createdAt, email, handle, imageUrl, and userId are
created. The imageUrl created is a temporary placeholder that the user can change when they edit
their profile picture. The bio, location, and website of the user can be added later when the user
decides to edit their profile.
{

"users": {


"bio": { "Type": "string" },

"createdAt": { "Type": "string" },

"email": { "Type": "string" },

"handle": { "Type": "string" },

"imageUrl": { "Type": "string" },

"userId": { "Type": "string" },

"location": { "Type": "string" },

"website": { "Type": "string" }

}

}

#### 1.3.2 Post Schema

When a user creates a post, it will record the message body, the time of creation, the user’s
name/handle, and image. The starting like count and comment count will be 0. It will be updated
when another user likes, unlike, and comment on the post.
{

"post": {

"body": { "Type": "string" },

"commentCount": { "Type": "number" },

"createdAt": { "Type": "string" },

"likeCount": { "Type": "number" },

"userHandle": { "Type": "string" },

"userImage": { "Type": "string" }

}

}


#### 1.3.3 Comment Schema

When a user creates a comment, it records the comment body, the time of creation, the post
identification (ID) of the post to which the comment is replying, the user’s name/handle, and
image.

##### {

"comments": {

"body": { "Type": "string" },

"createdAt": { "Type": "string" },

"postId": { "Type": "string" },

"userHandle": { "Type": "string" },

"userImage": { "Type": "string" }

}

}

#### 1.3.4 Notification Schema

A notification is created when another user likes, unlike, or comments on your post. It records the
time of creation, the post ID of the activity, the user’s name, the sender’s name, whether it is a
comment-type activity or a like-type activity, and whether the notification has been read or not.
{

"notification": {

"createdAt": { "Type": "string" },

"postId": { "Type": "string" },

"read": { "Type": "boolean" },


"recipient": { "Type": "string" },

"sender": { "Type": "string" },

"type": { "Type": "string" }

}

}

#### 1.3.5 Like Schema

Liking a post records the name of the user who likes the post and the post ID itself.
{

"likes": {

"postId": { "Type": "string" },

"UserHandle": { "Type": "string" }

}

}


## Chapter 2:

## Implementation

These are the dependencies that were used for the Front-end of sandbox Social Platform:

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_19.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 19 : Dependencies for front-end
```
These are the dependencies that were used for the Back-end of sandbox Social Platform:

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_20.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 20 : Dependencies for backend
```
Important Libraries used:

```
Library Description
axios Promise based HTTP client for the browser and node.js
firebase Firebase SDK
react JavaScript library for building UI components
React-router-
dom
```
```
Provide Dynamic Routing
```
```
dayjs JavaScript library that manipulates dates
jwt-decode Library that helps with decoding JWT tokens
redux State management
Reduce-thunk Middleware for redux that returns a function instead of action
Busboy Streaming parser for HTML forms data for node.js
cors Node.js cross origin resource sharing middleware
express Node.js web application framework
Firebase-admin Firebase admin SDK
Firebase-
functions
```
```
Firebase functions SDK
```
```
uuidv4 universally unique identifier library
Figure 21 : Important libraries used for Sandbox Social Platform
```

### 2.1 Front end

#### 2.1.1 One message feed/post

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_21.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 22 : CSS for message post
```

Here is the CSS for one message post. Here, we style the avatar, the header contents like name and date,
the message, and the actions, such as like, comment, and expand. We even have our media queries in
here to adapt to the size of the screen.

#### 2.1.2 Comment thread
<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_22.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 23 : CSS for comment thread
```
Here is the CSS style of the comment thread. Here, we style the expand button that you see in the previous
message post. When you click the expand button on the message post, it will bring you to the comment
thread. I even included a spinner to show that the comments for this post are loading.


#### 2.1.3 Profile

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_24.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 24 : CSS for profile
```
This is the CSS of the profile section. Here, we design the background, padding, and border.

#### 2.1.4 Post form modal
<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_25.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 25 : CSS for Post form
```
This is the CSS of the modal in which you post a message. There are the submit button and the
close button. I even included a spinner to show that the post is loading.


#### 2.1.5 NavBar
<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_26.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 26 : Code for Navigation bar
```
Here is the code for the navigation bar. It checks if you are an authenticated user before showing the post
message icon and notifications icon. If you are not authenticated, you will see the login, home, and signup
icons instead.


#### 2.1.6 Like button
<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_27.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 27 : Code for Like button
```
Here is the code and CSS for the like button. The like button will show a “hollow” icon if it has
not been liked and a “full” icon if it has been liked.


#### 2.1.7 Notification

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_28.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 28 : Code for Notification
```

Here is the code for notifications. The icon will appear once the user receives an activity from the
backend. There will be a badge that tells you the number of notifications you have.

#### 2.1.8 Comments

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_29.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 29 : CSS for comment
```
Here is the CSS style for the comment section. Here, we design the avatar, message, date, and title
of the comment. We even included media queries here so that it adapts to the screen size of the
browser.


#### 2.1.9 Home page layout

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_30.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 30 : Code for home page
```
This is the CSS and code for the home page layout. It displays the message feed as well as the
profile of the authenticated user. The media queries included here switch the profile to the top of
the page when the screen size becomes smaller.


#### 2.1.10 Login page

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_31.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 31 : CSS for login page
```
This is the CSS for the login page. The CSS for the login page is similar to the sign-up page as
well. Here, we position the avatar, which is the logo, to be at the top and center of the page. This
is followed by the actual form for logging in.

#### 2.1.11 Theme

This long piece of code is the theme for the whole website. It includes the CSS for all the
components as well as the font being used. The font that I choose is ‘HKGrotesk Pro’.


<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_32.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 32 : Code for theme
```
### 2.2 Back end

#### 2.2.1 Authentication

The authentication for the social platform will be using the Firebase Authentication. However, we
will be using additional measures such as JSON Web Tokens (JWT).

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_33.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 33 :Explanation for how JWT works
```
The figure above is an explanation of how JWT works. When the user logins in with their email
and password, the server would create a unique token for them. When they request anything from
the server, they will now have to validate with the token. The server will then check if it is an
authenticated user or if the token itself is still valid. If the token expires, the server will not respond.


2.2.1.1 Validation

1. Regex validation for email.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_34.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 34 : Regex code
```
2. Validation for sign up data. Creation of errors to notify users.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_35.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 35 : Error creation code
```
3. Validation for login up data. Creation of errors to notify users.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_36.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 36 : Validation code
```

2 .2.1.2 Sign Up

1. We first import the Firebase admin SDK so that we can create the admin functions. We
    then initialize the app and export both the Firebase admin and the Firestore database.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_37.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 37 : Import Firebase admin and initialize app
```
2. We then import the admin and database from the previous step. The configuration and
    Firebase SDK module are also needed here. We then initialize the firebase app.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_38.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 38 : Import Firebase and relevant modules to initialize app
```
3. We create a sign-up function that requires a request and sends a response to the user. It
    requires the email, password, confirm password, and their handle (name). It then sends the
    user’s response to the validation step to validate the inputs of the user.

```
If the user’s data is valid, we then check if their handle(name) is being used. If it is used,
we respond by telling them that the name has already been taken. If it is not in use, we
proceed with the creation of the user.
```
```
We then get the user’s Unique identifier and the user’s identifier token from the data of the
creation for the user. We call the getIdToken() method to get the token from the user data.
```

After the creation of the user, we will send the user’s credentials to the database for storage.
A temporary user image will be created for the user until they change their profile picture.

When everything has been created successfully, we send a JSON status of 201 which
represents that everything is good. The user’s token will then be included in the JSON
message for authentication of the user.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_39.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 39 : User Sign up code
```

4. Users can now sign up using the API endpoint https://asia-southeast2-sandbox-
    social.cloudfunctions.net/api + the sign-up route. This is because we have exported it to
    the Firebase Cloud Functions API and posted the sign-up route.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_40.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 40 : Sign up API
```
2.2.1.3 Sign In

1. The initial steps for signing in are almost the same that as the sign-up section.

```
For the sign-in section, we require the user’s login credentials and if everything is validated,
we send them a response.
```
```
We first receive the user’s email and password which will be validated. After the validation,
if the data is alright, we will proceed with the signing in of the user and the validated user
will receive their JWT as a response. If not, they will be receiving
errors for incorrect regex or credentials.
```

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_41.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 41 : User Sign in code
```
2. The API route for the login is similar to the one for the sign up section.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_42.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 42 : Sign in API
```
#### 2.2.2 Profile

2 **.2.2.1 Get User’s Data**

1. We have created a function which allows anyone to see their profile. They only need to
    type in the API endpoints for the user’s collection with the user’s handle(name).

```
If the user is found, we will return the data to the next section. If not, we will return a JSON
error message which tells them the user is not found.
```

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_43.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 43 : Get user profile
```
2. The data from part one will then be passed on and be put into objects for the data to be
    mapped. This data will then be passed on as a JSON message to the front-end.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_44.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 44 : Convert to JSON
```
2 **.2.2.2 Add User’s Data**


1. For adding and editing the user’s details, we have created a function that receives input
    from the user. It then sends the data for reduction with the function for reducing user details.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_45.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 45 : Trim data
```
2. After the reduction, we then submit the data to the database which returns a JSON
    message about the success of the update.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_46.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 46 : Update user details
```
#### 2.2.3 Message Feed

1. To receive all the messages from the message feed, we have to import the database module.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_47.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 47 : Import database module
```
2. We then call the post collection from the database, which will be pushed into a JSON object
    and returned to the user.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_48.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 48 : Pull data from Post collection and convert into JSON
```
#### 2.2.4 Post

1. To post a message, the user will have to submit the JSON data to the server. The JSON
    data will have to contain a message-body if not an error will appear. If all the required
    fields are found in the JSON body, a post will be created with 0 likes and comments.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_49.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 49 : Validate post data
```

2. The post will then be sent to the database to be added to the post collection. You will then
    be able to view the post on the message feed.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_50.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 50 : Send post to database
```
#### 2.2.5 Comment

1. To comment on a post, we follow the same method as the post.The user will have to submit
    the JSON data to the server. The JSON data will have to contain a message-body if not an
    error will appear. The data for the comment will have to contain the post ID of the post it
    is commenting on, this is the additional requirement that is different from a post.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_51.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 51 : Validate Comment data
```

2. If all the required fields are found in the JSON body, it will search for the post in the posts
    collection. If the post is found, the comment count will be updated to increase by 1. The
    comment will then be added to the comments collection in the database.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_52.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 52 : Add comment to database
```
#### 2.2.6 Notification

2 .2.6.1 Notifications for Like

The notification for likes is created by using the Firestore database module. We then call a snapshot
from the database collection for likes. This would allow us to receive real-time updates from the
likes collection.

We then create a new document in the notifications document and set the type to like. The read
property will also be set to false since it is a new notification.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_53.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 53 : Create Notification in database on like
```
2 .2.6.2 Notifications for Comment
The notification for comments is very similar to the one for likes. This time we will be “listening”
to the comments collection instead. The notification type will also be set to comment.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_54.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 54 : Create notificaiton for database on comment
```
#### 2.2.7 Like

2 .2.7.1 Liking a Post

For liking a post, the user will click the like button of the post. This sends data to the API which
receives the information of the post as well as the user who liked it.

If the post can be found in the post collection, a new “like” document will be created, and this
increases the like count for the post itself.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_55.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 55 : Create Like in database
```
2 .2.7.2 Un-liking a Post

Un-liking a post is similar to that of liking a post. This time we just decrease the like count by 1
for the specific post.

<img src="https://firebasestorage.googleapis.com/v0/b/sandbox-social.appspot.com/o/documentation%2FPicture_56.png?alt=media&token=ae91a52b-d8db-4ee9-8939-3ae1df275d8a" width="500">
```
Figure 56 : Delete Like in database
```

## Reference

1. “the collaborative interface design tool.,” Figma. [Online]. Available:
    https://www.figma.com/. [Accessed: 1 8 - Apr-2021].
2. “UI: A popular React UI framework,” Material. [Online]. Available: https://materialui.com/.
    [Accessed: 18 - Apr- 2021 ].
3. J. T. Mark Otto, “Bootstrap,” Bootstrap · The most popular HTML, CSS, and JS library in
    the world. [Online]. Available: https://getbootstrap.com/. [Accessed: 18 - Apr- 2021 ].
4. “React – A JavaScript library for building user interfaces,” – A JavaScript library for
    building user interfaces. [Online]. Available: https://reactjs.org/. [Accessed: 18 - Apr- 2021 ].
5. “Firebase Brand Guidelines,” Google. [Online]. Available:
    https://firebase.google.com/brand-guidelines. [Accessed: 18 - Apr- 2021 ].


